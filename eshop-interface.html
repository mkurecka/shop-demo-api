<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo E-shop - Spr√°va obchodu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .tab {
            flex: 1;
            padding: 1rem 2rem;
            background: white;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover {
            background: #f8f9fa;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 2rem;
        }

        .tab-content.active {
            display: block;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-right: 1rem;
            margin-bottom: 1rem;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }

        .btn-success {
            background: #48bb78;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .btn-danger {
            background: #f56565;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .card-header {
            background: #f8f9fa;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 600;
        }

        .card-body {
            padding: 1.5rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .product-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-2px);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #999;
        }

        .product-info {
            padding: 1rem;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #2d3748;
        }

        .product-description {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #718096;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #4a5568;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background: #fed7d7;
            color: #c53030;
        }

        .status-processing {
            background: #fef5e7;
            color: #dd6b20;
        }

        .status-shipped {
            background: #bee3f8;
            color: #3182ce;
        }

        .status-delivered {
            background: #c6f6d5;
            color: #2f855a;
        }

        .status-cancelled {
            background: #fed7d7;
            color: #c53030;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .close {
            color: #aaa;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .cart {
            position: fixed;
            right: 2rem;
            bottom: 2rem;
            background: #667eea;
            color: white;
            padding: 1rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .cart:hover {
            transform: scale(1.05);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f56565;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #718096;
        }

        .error {
            background: #fed7d7;
            color: #c53030;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .success {
            background: #c6f6d5;
            color: #2f855a;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                margin: 5% auto;
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üõçÔ∏è Demo E-shop</h1>
        <p>Spr√°va obchodu a n√°kupn√≠ rozhran√≠</p>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="showTab('products')">üõçÔ∏è Produkty</button>
            <button class="tab" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="tab" onclick="showTab('orders')">üì¶ Objedn√°vky</button>
            <button class="tab" onclick="showTab('customers')">üë• Z√°kazn√≠ci</button>
        </div>

        <!-- Produkty Tab -->
        <div id="products" class="tab-content active">
            <div class="card-header">
                <h2>Produkty v e-shopu</h2>
                <button class="btn btn-success" onclick="addToCart('sample')">‚ûï P≈ôidat do ko≈°√≠ku (uk√°zka)</button>
            </div>
            <div id="products-grid" class="grid">
                <div class="loading">Naƒç√≠t√°n√≠ produkt≈Ø...</div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üìä P≈ôehled obchodu</h2>
                </div>
                <div class="card-body">
                    <div class="grid">
                        <div class="card">
                            <div class="card-body">
                                <h3>üì¶ Celkem objedn√°vek</h3>
                                <p style="font-size: 2rem; font-weight: bold; color: #667eea;" id="total-orders">-</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h3>üë• Celkem z√°kazn√≠k≈Ø</h3>
                                <p style="font-size: 2rem; font-weight: bold; color: #48bb78;" id="total-customers">-</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h3>üõçÔ∏è Celkem produkt≈Ø</h3>
                                <p style="font-size: 2rem; font-weight: bold; color: #ed8936;" id="total-products">-</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>‚ö° Rychl√© akce</h3>
                </div>
                <div class="card-body">
                    <button class="btn btn-success" onclick="openModal('newOrder')">‚ûï Nov√° objedn√°vka</button>
                    <button class="btn btn-success" onclick="openModal('newCustomer')">üë§ Nov√Ω z√°kazn√≠k</button>
                    <button class="btn" onclick="loadData()">üîÑ Obnovit data</button>
                </div>
            </div>
        </div>

        <!-- Objedn√°vky Tab -->
        <div id="orders" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üì¶ Spr√°va objedn√°vek</h2>
                    <button class="btn btn-success" onclick="openModal('newOrder')">‚ûï Nov√° objedn√°vka</button>
                </div>
                <div class="card-body">
                    <div id="orders-table">
                        <div class="loading">Naƒç√≠t√°n√≠ objedn√°vek...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Z√°kazn√≠ci Tab -->
        <div id="customers" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üë• Spr√°va z√°kazn√≠k≈Ø</h2>
                    <button class="btn btn-success" onclick="openModal('newCustomer')">‚ûï Nov√Ω z√°kazn√≠k</button>
                </div>
                <div class="card-body">
                    <div id="customers-table">
                        <div class="loading">Naƒç√≠t√°n√≠ z√°kazn√≠k≈Ø...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ko≈°√≠k -->
    <div class="cart" onclick="openModal('cart')">
        üõí
        <div class="cart-count" id="cart-count">0</div>
    </div>

    <!-- Modaly -->
    <!-- Nov√° objedn√°vka -->
    <div id="newOrder" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ûï Nov√° objedn√°vka</h3>
                <span class="close" onclick="closeModal('newOrder')">&times;</span>
            </div>
            <form id="orderForm">
                <div class="form-group">
                    <label for="order-email">Email z√°kazn√≠ka:</label>
                    <input type="email" id="order-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="order-phone">Telefon:</label>
                    <input type="tel" id="order-phone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="order-address">Doruƒçovac√≠ adresa:</label>
                    <textarea id="order-address" class="form-control" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="order-product">Produkt:</label>
                    <select id="order-product" class="form-control" required>
                        <option value="">Vyberte produkt...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="order-quantity">Mno≈æstv√≠:</label>
                    <input type="number" id="order-quantity" class="form-control" min="1" value="1" required>
                </div>
                <button type="submit" class="btn btn-success">‚úÖ Vytvo≈ôit objedn√°vku</button>
            </form>
        </div>
    </div>

    <!-- Nov√Ω z√°kazn√≠k -->
    <div id="newCustomer" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë§ Nov√Ω z√°kazn√≠k</h3>
                <span class="close" onclick="closeModal('newCustomer')">&times;</span>
            </div>
            <form id="customerForm">
                <div class="form-group">
                    <label for="customer-email">Email:</label>
                    <input type="email" id="customer-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="customer-first-name">Jm√©no:</label>
                    <input type="text" id="customer-first-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="customer-last-name">P≈ô√≠jmen√≠:</label>
                    <input type="text" id="customer-last-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Telefon:</label>
                    <input type="tel" id="customer-phone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="customer-address">Adresa:</label>
                    <input type="text" id="customer-address" class="form-control">
                </div>
                <div class="form-group">
                    <label for="customer-city">Mƒõsto:</label>
                    <input type="text" id="customer-city" class="form-control">
                </div>
                <div class="form-group">
                    <label for="customer-postal">PSƒå:</label>
                    <input type="text" id="customer-postal" class="form-control">
                </div>
                <button type="submit" class="btn btn-success">‚úÖ Vytvo≈ôit z√°kazn√≠ka</button>
            </form>
        </div>
    </div>

    <!-- Ko≈°√≠k -->
    <div id="cart" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üõí N√°kupn√≠ ko≈°√≠k</h3>
                <span class="close" onclick="closeModal('cart')">&times;</span>
            </div>
            <div id="cart-items">
                <p>Ko≈°√≠k je pr√°zdn√Ω</p>
            </div>
            <div style="margin-top: 1rem;">
                <button class="btn btn-success" onclick="checkout()">üí≥ Objednat</button>
                <button class="btn btn-danger" onclick="clearCart()">üóëÔ∏è Vypr√°zdnit ko≈°√≠k</button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'https://shop-demo-api.kureckamichal.workers.dev/api';
        let cart = [];
        let products = [];
        let customers = [];
        let orders = [];

        // Inicializace
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateCartCount();
        });

        // Tab management
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Modal management
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Load data from API
        async function loadData() {
            try {
                await Promise.all([
                    loadProducts(),
                    loadCustomers(), 
                    loadOrders()
                ]);
                updateDashboard();
            } catch (error) {
                console.error('Error loading data:', error);
                showError('Chyba p≈ôi naƒç√≠t√°n√≠ dat: ' + error.message);
            }
        }

        async function loadProducts() {
            try {
                const response = await fetch(`${API_BASE}/products`);
                const data = await response.json();
                if (data.success) {
                    products = data.data;
                    renderProducts();
                    populateProductSelect();
                }
            } catch (error) {
                document.getElementById('products-grid').innerHTML = '<div class="error">Chyba p≈ôi naƒç√≠t√°n√≠ produkt≈Ø</div>';
            }
        }

        async function loadCustomers() {
            try {
                const response = await fetch(`${API_BASE}/customers`);
                const data = await response.json();
                if (data.success) {
                    customers = data.data;
                    renderCustomers();
                }
            } catch (error) {
                document.getElementById('customers-table').innerHTML = '<div class="error">Chyba p≈ôi naƒç√≠t√°n√≠ z√°kazn√≠k≈Ø</div>';
            }
        }

        async function loadOrders() {
            try {
                const response = await fetch(`${API_BASE}/orders`);
                const data = await response.json();
                if (data.success) {
                    orders = data.data;
                    renderOrders();
                }
            } catch (error) {
                document.getElementById('orders-table').innerHTML = '<div class="error">Chyba p≈ôi naƒç√≠t√°n√≠ objedn√°vek</div>';
            }
        }

        // Render functions
        function renderProducts() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-image">üì±</div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-price">${formatPrice(product.price)} Kƒç</div>
                        <div class="product-meta">
                            <span>Kategorie: ${product.category}</span>
                            <span>Skladem: ${product.stock}</span>
                        </div>
                        <button class="btn" onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                            üõí Do ko≈°√≠ku
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderCustomers() {
            const table = document.getElementById('customers-table');
            table.innerHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Jm√©no</th>
                            <th>Email</th>
                            <th>Telefon</th>
                            <th>Mƒõsto</th>
                            <th>Registrace</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${customers.map(customer => `
                            <tr>
                                <td>${customer.id}</td>
                                <td>${customer.first_name} ${customer.last_name}</td>
                                <td>${customer.email}</td>
                                <td>${customer.phone}</td>
                                <td>${customer.city || '-'}</td>
                                <td>${formatDate(customer.created_at)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function renderOrders() {
            const table = document.getElementById('orders-table');
            table.innerHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>ƒå√≠slo objedn√°vky</th>
                            <th>Email</th>
                            <th>Stav</th>
                            <th>Celkem</th>
                            <th>Vytvo≈ôeno</th>
                            <th>Doruƒçen√≠</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${orders.map(order => `
                            <tr>
                                <td><strong>${order.order_number}</strong></td>
                                <td>${order.customer_email}</td>
                                <td><span class="status status-${order.status}">${getStatusText(order.status)}</span></td>
                                <td><strong>${formatPrice(order.total)} Kƒç</strong></td>
                                <td>${formatDate(order.created_at)}</td>
                                <td>${order.estimated_delivery ? formatDate(order.estimated_delivery) : '-'}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function updateDashboard() {
            document.getElementById('total-orders').textContent = orders.length;
            document.getElementById('total-customers').textContent = customers.length;
            document.getElementById('total-products').textContent = products.length;
        }

        function populateProductSelect() {
            const select = document.getElementById('order-product');
            select.innerHTML = '<option value="">Vyberte produkt...</option>' + 
                products.map(product => `<option value="${product.id}">${product.name} - ${formatPrice(product.price)} Kƒç</option>`).join('');
        }

        // Cart functions
        function addToCart(productId) {
            if (productId === 'sample') {
                showSuccess('Uk√°zka p≈ôid√°n√≠ do ko≈°√≠ku!');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    quantity: 1
                });
            }
            
            updateCartCount();
            showSuccess(`${product.name} p≈ôid√°n do ko≈°√≠ku!`);
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
            
            const cartItems = document.getElementById('cart-items');
            if (cart.length === 0) {
                cartItems.innerHTML = '<p>Ko≈°√≠k je pr√°zdn√Ω</p>';
            } else {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartItems.innerHTML = `
                    ${cart.map(item => `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                            <div>
                                <strong>${item.name}</strong><br>
                                <small>${formatPrice(item.price)} Kƒç √ó ${item.quantity}</small>
                            </div>
                            <div>
                                <button class="btn btn-danger" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;" onclick="removeFromCart(${item.id})">√ó</button>
                            </div>
                        </div>
                    `).join('')}
                    <div style="margin-top: 1rem; font-size: 1.2rem; font-weight: bold;">
                        Celkem: ${formatPrice(total)} Kƒç
                    </div>
                `;
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
        }

        function clearCart() {
            cart = [];
            updateCartCount();
            showSuccess('Ko≈°√≠k byl vypr√°zdnƒõn');
        }

        async function checkout() {
            if (cart.length === 0) {
                showError('Ko≈°√≠k je pr√°zdn√Ω!');
                return;
            }
            
            const email = prompt('Zadejte v√°≈° email:');
            const phone = prompt('Zadejte v√°≈° telefon:');
            const address = prompt('Zadejte doruƒçovac√≠ adresu:');
            
            if (!email || !phone || !address) {
                showError('V≈°echny √∫daje jsou povinn√©!');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/orders`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        customer_email: email,
                        customer_phone: phone,
                        shipping_address: address,
                        items: cart.map(item => ({
                            product_id: item.id,
                            quantity: item.quantity
                        }))
                    })
                });

                const data = await response.json();
                if (data.success) {
                    showSuccess(`Objedn√°vka ${data.data.order_number} byla √∫spƒõ≈°nƒõ vytvo≈ôena!`);
                    clearCart();
                    closeModal('cart');
                    loadOrders();
                } else {
                    showError('Chyba p≈ôi vytv√°≈ôen√≠ objedn√°vky: ' + data.error.message);
                }
            } catch (error) {
                showError('Chyba p≈ôi odes√≠l√°n√≠ objedn√°vky: ' + error.message);
            }
        }

        // Form handlers
        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                customer_email: document.getElementById('order-email').value,
                customer_phone: document.getElementById('order-phone').value,
                shipping_address: document.getElementById('order-address').value,
                items: [{
                    product_id: parseInt(document.getElementById('order-product').value),
                    quantity: parseInt(document.getElementById('order-quantity').value)
                }]
            };

            try {
                const response = await fetch(`${API_BASE}/orders`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                if (data.success) {
                    showSuccess(`Objedn√°vka ${data.data.order_number} byla √∫spƒõ≈°nƒõ vytvo≈ôena!`);
                    closeModal('newOrder');
                    this.reset();
                    loadOrders();
                } else {
                    showError('Chyba p≈ôi vytv√°≈ôen√≠ objedn√°vky: ' + data.error.message);
                }
            } catch (error) {
                showError('Chyba p≈ôi odes√≠l√°n√≠ objedn√°vky: ' + error.message);
            }
        });

        document.getElementById('customerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                email: document.getElementById('customer-email').value,
                first_name: document.getElementById('customer-first-name').value,
                last_name: document.getElementById('customer-last-name').value,
                phone: document.getElementById('customer-phone').value,
                address: document.getElementById('customer-address').value,
                city: document.getElementById('customer-city').value,
                postal_code: document.getElementById('customer-postal').value
            };

            try {
                const response = await fetch(`${API_BASE}/customers`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                if (data.success) {
                    showSuccess('Z√°kazn√≠k byl √∫spƒõ≈°nƒõ vytvo≈ôen!');
                    closeModal('newCustomer');
                    this.reset();
                    loadCustomers();
                } else {
                    showError('Chyba p≈ôi vytv√°≈ôen√≠ z√°kazn√≠ka: ' + data.error.message);
                }
            } catch (error) {
                showError('Chyba p≈ôi odes√≠l√°n√≠ z√°kazn√≠ka: ' + error.message);
            }
        });

        // Utility functions
        function formatPrice(price) {
            return new Intl.NumberFormat('cs-CZ').format(price);
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleString('cs-CZ');
        }

        function getStatusText(status) {
            const statusMap = {
                'pending': 'ƒåek√°',
                'processing': 'Zpracov√°v√° se',
                'shipped': 'Odesl√°no',
                'delivered': 'Doruƒçeno',
                'cancelled': 'Zru≈°eno'
            };
            return statusMap[status] || status;
        }

        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            errorDiv.style.position = 'fixed';
            errorDiv.style.top = '20px';
            errorDiv.style.right = '20px';
            errorDiv.style.zIndex = '1001';
            document.body.appendChild(errorDiv);
            setTimeout(() => errorDiv.remove(), 5000);
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            successDiv.style.position = 'fixed';
            successDiv.style.top = '20px';
            successDiv.style.right = '20px';
            successDiv.style.zIndex = '1001';
            document.body.appendChild(successDiv);
            setTimeout(() => successDiv.remove(), 3000);
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>